
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Magistrala IoT System">
      
      
      
        <link rel="canonical" href="https://docs.magistrala.abstractmachines.fr/storage/">
      
      
        <link rel="prev" href="../provision/">
      
      
        <link rel="next" href="../twins/">
      
      
      <link rel="icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Storage - Magistrala</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#storage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Magistrala" class="md-header__button md-logo" aria-label="Magistrala" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Magistrala
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Storage
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/absmach/magistrala" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Magistrala" class="md-nav__button md-logo" aria-label="Magistrala" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    Magistrala
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/absmach/magistrala" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../entities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Entities
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../authentication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../authorization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authorization
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Security
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../messaging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Messaging
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Events
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../edge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Edge
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../certs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Certs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../bootstrap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bootstrap
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lora/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LoRa
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../opcua/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OPC-UA
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../provision/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Provision
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Storage
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Storage
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#writers" class="md-nav__link">
    <span class="md-ellipsis">
      Writers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subscriber-config" class="md-nav__link">
    <span class="md-ellipsis">
      Subscriber config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transformer-config" class="md-nav__link">
    <span class="md-ellipsis">
      Transformer config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#influxdb-influxdb-writer" class="md-nav__link">
    <span class="md-ellipsis">
      InfluxDB, InfluxDB Writer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cassandra-and-cassandra-writer" class="md-nav__link">
    <span class="md-ellipsis">
      Cassandra and Cassandra Writer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-and-mongodb-writer" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB and MongoDB Writer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql-and-postgresql-writer" class="md-nav__link">
    <span class="md-ellipsis">
      PostgreSQL and PostgreSQL Writer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timescale-and-timescale-writer" class="md-nav__link">
    <span class="md-ellipsis">
      Timescale and Timescale Writer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#readers" class="md-nav__link">
    <span class="md-ellipsis">
      Readers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Readers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#influxdb-reader" class="md-nav__link">
    <span class="md-ellipsis">
      InfluxDB Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cassandra-reader" class="md-nav__link">
    <span class="md-ellipsis">
      Cassandra Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-reader" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql-reader" class="md-nav__link">
    <span class="md-ellipsis">
      PostgreSQL Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timescale-reader" class="md-nav__link">
    <span class="md-ellipsis">
      Timescale Reader
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../twins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Twins
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tracing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tracing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developer's Guide
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../benchmark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Benchmark
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="/blogs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blogs
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#writers" class="md-nav__link">
    <span class="md-ellipsis">
      Writers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subscriber-config" class="md-nav__link">
    <span class="md-ellipsis">
      Subscriber config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transformer-config" class="md-nav__link">
    <span class="md-ellipsis">
      Transformer config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#influxdb-influxdb-writer" class="md-nav__link">
    <span class="md-ellipsis">
      InfluxDB, InfluxDB Writer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cassandra-and-cassandra-writer" class="md-nav__link">
    <span class="md-ellipsis">
      Cassandra and Cassandra Writer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-and-mongodb-writer" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB and MongoDB Writer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql-and-postgresql-writer" class="md-nav__link">
    <span class="md-ellipsis">
      PostgreSQL and PostgreSQL Writer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timescale-and-timescale-writer" class="md-nav__link">
    <span class="md-ellipsis">
      Timescale and Timescale Writer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#readers" class="md-nav__link">
    <span class="md-ellipsis">
      Readers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Readers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#influxdb-reader" class="md-nav__link">
    <span class="md-ellipsis">
      InfluxDB Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cassandra-reader" class="md-nav__link">
    <span class="md-ellipsis">
      Cassandra Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-reader" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql-reader" class="md-nav__link">
    <span class="md-ellipsis">
      PostgreSQL Reader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timescale-reader" class="md-nav__link">
    <span class="md-ellipsis">
      Timescale Reader
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="storage">Storage<a class="headerlink" href="#storage" title="Permanent link">#</a></h1>
<p>Magistrala supports various storage databases in which messages are stored:</p>
<ul>
<li>CassandraDB</li>
<li>MongoDB</li>
<li>InfluxDB</li>
<li>PostgreSQL</li>
<li>Timescale</li>
</ul>
<p>These storages are activated via docker-compose add-ons.</p>
<p>The <code>&lt;project_root&gt;/docker</code> folder contains an <code>addons</code> directory. This directory is used for various services that are not core to the Magistrala platform but could be used for providing additional features.</p>
<p>In order to run these services, core services, as well as the network from the core composition, should be already running.</p>
<h2 id="writers">Writers<a class="headerlink" href="#writers" title="Permanent link">#</a></h2>
<p>Writers provide an implementation of various <code>message writers</code>. Message writers are services that consume Magistrala messages, transform them to desired format and store them in specific data store. The path of the configuration file can be set using the following environment variables: <code>MG_CASSANDRA_WRITER_CONFIG_PATH</code>, <code>MG_POSTGRES_WRITER_CONFIG_PATH</code>, <code>MG_INFLUX_WRITER_CONFIG_PATH</code>, <code>MG_MONGO_WRITER_CONFIG_PATH</code> and <code>MG_TIMESCALE_WRITER_CONFIG_PATH</code>.</p>
<h3 id="subscriber-config">Subscriber config<a class="headerlink" href="#subscriber-config" title="Permanent link">#</a></h3>
<p>Each writer can filter messages based on subjects list that is set in <code>config.toml</code> configuration file. If you want to listen on all subjects, just set the field <code>subjects</code> in the <code>[subscriber]</code> section as <code>["channels.&gt;"]</code>, otherwise pass the list of subjects. Here is an example:</p>
<div class="highlight"><pre><span></span><code><span class="k">[subscriber]</span>
<span class="n">subjects</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;channels.*.messages.bedroom.temperature&quot;</span><span class="p">,</span><span class="s2">&quot;channels.*.messages.bedroom.humidity&quot;</span><span class="p">]</span>
</code></pre></div>
<p>Regarding the <a href="/messaging/#subtopics">Subtopics Section</a> in the messaging page, the example <code>channels/&lt;channel_id&gt;/messages/bedroom/temperature</code> can be filtered as <code>"channels.*.bedroom.temperature"</code>. The formatting of this filtering list is determined by the default message broker, NATS, format (<a href="https://docs.nats.io/nats-concepts/subjects">Subject-Based Messaging</a> &amp; <a href="https://docs.nats.io/nats-concepts/subjects#wildcards">Wildcards</a>).</p>
<h3 id="transformer-config">Transformer config<a class="headerlink" href="#transformer-config" title="Permanent link">#</a></h3>
<p>There are two types of transformers: SenML and JSON. The transformer type is set in configuration file.</p>
<p>For SenML transformer, supported message payload formats are SenML+CBOR and SenML+JSON. They are configurable over <code>content_type</code> field in the <code>[transformer]</code> section and expect <code>application/senml+json</code> or <code>application/senml+cbor</code> formats. Here is an example:</p>
<div class="highlight"><pre><span></span><code><span class="k">[transformer]</span>
<span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;senml&quot;</span>
<span class="n">content_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;application/senml+json&quot;</span>
</code></pre></div>
<p>Usually, the payload of the IoT message contains message time. It can be in different formats (like base time and record time in the case of SenML) and the message field can be under the arbitrary key. Usually, we would want to map that time to the Magistrala Message field Created and for that reason, we need to configure the Transformer to be able to read the field, parse it using proper format and location (if devices time is different than the service time), and map it to Magistrala Message.</p>
<p>For JSON transformer you can configure <code>time_fields</code> in the <code>[transformer]</code> section to use arbitrary fields from the JSON message payload as timestamp. <code>time_fields</code> is represented by an array of objects with fields <code>field_name</code>, <code>field_format</code> and <code>location</code> that represent respectively the name of the JSON key to use as timestamp, the time format to use for the field value and the time location. Here is an example:</p>
<div class="highlight"><pre><span></span><code><span class="k">[transformer]</span>
<span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;json&quot;</span>
<span class="n">time_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="n">field_name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;seconds_key&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">field_format</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;unix&quot;</span><span class="p">,</span><span class="w">    </span><span class="n">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;UTC&quot;</span><span class="p">},</span>
<span class="w">               </span><span class="p">{</span><span class="w"> </span><span class="n">field_name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;millis_key&quot;</span><span class="p">,</span><span class="w">  </span><span class="n">field_format</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;unix_ms&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;UTC&quot;</span><span class="p">},</span>
<span class="w">               </span><span class="p">{</span><span class="w"> </span><span class="n">field_name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;micros_key&quot;</span><span class="p">,</span><span class="w">  </span><span class="n">field_format</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;unix_us&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;UTC&quot;</span><span class="p">},</span>
<span class="w">               </span><span class="p">{</span><span class="w"> </span><span class="n">field_name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;nanos_key&quot;</span><span class="p">,</span><span class="w">   </span><span class="n">field_format</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;unix_ns&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;UTC&quot;</span><span class="p">}]</span>
</code></pre></div>
<p>JSON transformer can be used for any JSON payload. For the messages that contain <em>JSON array as the root element</em>, JSON Transformer does normalization of the data: it creates a separate JSON message for each JSON object in the root. In order to be processed and stored properly, JSON messages need to contain message format information. For the sake of simplicity, nested JSON objects are flatten to a single JSON object in InfluxDB, using composite keys separated by the <code>/</code> separator. This implies that the separator character (<code>/</code>) <em>is not allowed in the JSON object key</em> while using InfluxDB. Apart from InfluxDB, separator character (<code>/</code>) usage in the JSON object key is permitted, since other <a href="/storage/#writers">Writer</a> types do not flat the nested JSON objects. For example, the following JSON object:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;name&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8659456789564231564</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;in&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.145</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;alarm&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1571259850000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;d&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;tmp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.564</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;hmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">87</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;loc&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>for InfluxDB will be transformed to:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;name&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8659456789564231564</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;in&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.145</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;alarm&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1571259850000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;d/tmp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.564</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;d/hmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">87</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;d/loc/x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;d/loc/y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="p">}</span>
</code></pre></div>
<p>while for other Writers it will preserve its original format.</p>
<p>The message format is stored in <em>the subtopic</em>. It's the last part of the subtopic. In the example:</p>
<div class="highlight"><pre><span></span><code>http://localhost:8008/channels/&lt;channelID&gt;/messages/home/temperature/myFormat
</code></pre></div>
<p>the message format is <code>myFormat</code>. It can be any valid subtopic name, JSON transformer is format-agnostic. The format is used by the JSON message consumers so that they can process the message properly. If the format is not present (i.e. message subtopic is empty), JSON Transformer will report an error. Message writers will store the message(s) in the table/collection/measurement (depending on the underlying database) with the name of the format (which in the example is <code>myFormat</code>). Magistrala writers will try to save any format received (whether it will be successful depends on the writer implementation and the underlying database), but it's recommended that publishers don't send different formats to the same subtopic.</p>
<h3 id="influxdb-influxdb-writer">InfluxDB, InfluxDB Writer<a class="headerlink" href="#influxdb-influxdb-writer" title="Permanent link">#</a></h3>
<p>From the project root execute the following command:</p>
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/addons/influxdb-writer/docker-compose.yml<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<p>This will install and start:</p>
<ul>
<li><a href="https://docs.influxdata.com/influxdb">InfluxDB</a> - time series database</li>
<li>InfluxDB writer - message repository implementation for InfluxDB</li>
</ul>
<p>Those new services will take some additional ports:</p>
<ul>
<li>8086 by InfluxDB</li>
<li>9006 by InfluxDB writer service</li>
</ul>
<p>To access Influx-UI, navigate to <code>http://localhost:8086</code> and login with: <code>magistrala</code>, password: <code>magistrala</code></p>
<h3 id="cassandra-and-cassandra-writer">Cassandra and Cassandra Writer<a class="headerlink" href="#cassandra-and-cassandra-writer" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>./docker/addons/cassandra-writer/init.sh
</code></pre></div>
<p><em>Please note that Cassandra may not be suitable for your testing environment because of its high system requirements.</em></p>
<h3 id="mongodb-and-mongodb-writer">MongoDB and MongoDB Writer<a class="headerlink" href="#mongodb-and-mongodb-writer" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/addons/mongodb-writer/docker-compose.yml<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<p>MongoDB default port (27017) is exposed, so you can use various tools for database inspection and data visualization.</p>
<h3 id="postgresql-and-postgresql-writer">PostgreSQL and PostgreSQL Writer<a class="headerlink" href="#postgresql-and-postgresql-writer" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/addons/postgres-writer/docker-compose.yml<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<p>Postgres default port (5432) is exposed, so you can use various tools for database inspection and data visualization.</p>
<h3 id="timescale-and-timescale-writer">Timescale and Timescale Writer<a class="headerlink" href="#timescale-and-timescale-writer" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/addons/timescale-writer/docker-compose.yml<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<p>Timescale default port (5432) is exposed, so you can use various tools for database inspection and data visualization.</p>
<h2 id="readers">Readers<a class="headerlink" href="#readers" title="Permanent link">#</a></h2>
<p>Readers provide an implementation of various <code>message readers</code>. Message readers are services that consume normalized (in <code>SenML</code> format) Magistrala messages from data storage and opens HTTP API for message consumption. Installing corresponding writer before reader is implied.</p>
<p>Each of the Reader services exposes the same <a href="https://github.com/absmach/magistrala/blob/master/api/readers.yml">HTTP API</a> for fetching messages on its default port.</p>
<p>To read sent messages on channel with id <code>channel_id</code> you should send <code>GET</code> request to <code>/channels/&lt;channel_id&gt;/messages</code> with thing access token in <code>Authorization</code> header. That thing must be connected to channel with <code>channel_id</code></p>
<p>Response should look like this:</p>
<div class="highlight"><pre><span></span><code><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Tue, 18 Sep 2018 18:56:19 GMT</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">228</span>

<span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;messages&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;Channel&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Publisher&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Protocol&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mqtt&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;name:voltage&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;V&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">5.6</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">48.56</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;Channel&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Publisher&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Protocol&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mqtt&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;name:temperature&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">24.3</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">48.56</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>Note that you will receive only those messages that were sent by authorization token's owner. You can specify <code>offset</code> and <code>limit</code> parameters in order to fetch specific group of messages. An example of HTTP request looks like:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>-S<span class="w"> </span>-i<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Thing &lt;thing_secret&gt;&quot;</span><span class="w"> </span>http://localhost:&lt;service_port&gt;/channels/&lt;channel_id&gt;/messages?offset<span class="o">=</span><span class="m">0</span><span class="p">&amp;</span><span class="nv">limit</span><span class="o">=</span><span class="m">5</span><span class="p">&amp;</span><span class="nv">format</span><span class="o">=</span>&lt;subtopic&gt;
</code></pre></div>
<p>If you don't provide <code>offset</code> and <code>limit</code> parameters, default values will be used instead: 0 for <code>offset</code> and 10 for <code>limit</code>. The <code>format</code> parameter indicates the last subtopic of the message. As indicated under the <a href="/storage/#writers"><code>Writers</code></a> section, the message format is stored in the subtopic as the last part of the subtopic. In the example:</p>
<div class="highlight"><pre><span></span><code>http://localhost:&lt;service_port&gt;/channels/&lt;channelID&gt;/messages/home/temperature/myFormat
</code></pre></div>
<p>the message format is <code>myFormat</code> and the value for <code>format=&lt;subtopic&gt;</code> is <code>format=myFormat</code>.</p>
<h3 id="influxdb-reader">InfluxDB Reader<a class="headerlink" href="#influxdb-reader" title="Permanent link">#</a></h3>
<p>To start InfluxDB reader, execute the following command:</p>
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/addons/influxdb-reader/docker-compose.yml<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<h3 id="cassandra-reader">Cassandra Reader<a class="headerlink" href="#cassandra-reader" title="Permanent link">#</a></h3>
<p>To start Cassandra reader, execute the following command:</p>
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/addons/cassandra-reader/docker-compose.yml<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<h3 id="mongodb-reader">MongoDB Reader<a class="headerlink" href="#mongodb-reader" title="Permanent link">#</a></h3>
<p>To start MongoDB reader, execute the following command:</p>
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/addons/mongodb-reader/docker-compose.yml<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<h3 id="postgresql-reader">PostgreSQL Reader<a class="headerlink" href="#postgresql-reader" title="Permanent link">#</a></h3>
<p>To start PostgreSQL reader, execute the following command:</p>
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/addons/postgres-reader/docker-compose.yml<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<h3 id="timescale-reader">Timescale Reader<a class="headerlink" href="#timescale-reader" title="Permanent link">#</a></h3>
<p>To start Timescale reader, execute the following command:</p>
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/addons/timescale-reader/docker-compose.yml<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright (c) Abstract Machines
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>